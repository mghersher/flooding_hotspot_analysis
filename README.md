# 311 Flooding hotspot analysis

This repository contains code necessary to conduct a hotspot analysis of the flooding complaints logged via 311. The notebooks in this repository are designed to be run in the order that they are labeled:

- 01_311 Extract Flooding Data and merge census data.ipynb: This notebook used the NYC 311 database API to load all flooding related complaints from 2010-2021 and cleans them. It drops complaints that are duplicates to each other and discards those that are missing location data. It also loads block-level population data from the 2020 census and merges it with block boundaries into a shapefile. This is the data that is used in 02_Hex grid.ipynb.
- 02_Hex grid.ipynb: This notebook loads the data prepared in the previous notebook. It then defines a hexagonal grid over New York City and clips this hexagonal grid to exclude areas of water or areas in public parks (ie. estimating the area of the grid cells that people can actually live in). It then calculates the number of 311 complaints that fall within each hexagonal grid cell. Using the same hexagonal grid, it conducts an areal interpolation to reaggregate the population data from the block-level to the hexagonal grid level. Using this hexagonal dataset, I calculated the number of 311 flooding complaints per 10,000 people in each hexagonal grid cell. Finally, the notebook uses quantiles to drop high outliers that are driven by hexagonal grids that have very few people, driving the complaints per 10,000 people statistic misleadingly high. It exports the hexagonal dataset to be used in 03_Hotspot_analysis.ipynb.
- 03_Hotspot_analysis.ipynb: This notebook conducts a hotspot analysis using a local Moran's I statistic. It does this both on the unnormalized number of flooding complaints per hexagonal grid cell and the number of 311 flooding complaints per 10,000 people. It creates preliminary maps along the way and exports the results to be mapped in QGIS.

The results of this analysis can be viewed in: https://docs.google.com/presentation/d/1_TAUHl1Hnwm2ZX-gMgx2fsei_2TO3DcNBjQpuvF8XA8/edit?usp=sharing
